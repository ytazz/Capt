# Choreonoid講習会 @ ROBOMECH2018会場 2018.6.3

    https://choreonoid.org/ja/workshop.html

    日時: 2018年6月3日(日) 10:00〜17:00
    場所: ROBOMECH2018会場 西日本総合展示場新館 3F 301会議室
    主催: 産業技術総合研究所
    講師: 中岡慎一郎 (Choreonoid開発者)
    定員: 24名 (先着順）
    参加費: 無料
    参加条件: Ubuntu Linux 16.04上にChoreonoid開発版をインストールしたノートパソコンを持参すること

## なぜ使うのか
- ハードウェア設計
- ソフトウェア開発
- 操作習得
- 運用テスト
- 低コスト
- 高効率性
- 高安全性

## 産総研のロボットシミュレータ
- OpenHRP（2000−2007）
- OpenHRP3（2007-）
- Choreonoid(2010-)

## ほかのシミュレータ
- Gazebo(OSRF): ROSとの親和性が高い
- V-REP(COPPELIA ROBOTICS)

## Chorenoidの特徴
- 高拡張性: シミュレータを核として様々な機能を統合可能
- 様々なバックエンドに対応: 物理エンジン, ロボット入出力
- 様々なGUIを構築可能

## 対応物理エンジン
- 独自エンジン（産総研開発）: ヒューマノイドロボット等の多関節ロボットに対して高速・安定
- その他のオープンソースエンジン: AGX Dynamics
- 原発では有線が一般的でそのような点で使える

## ロボット入出力
- Choreonoid独自の「シンプルコントローラ」として制御ソフトウェアを導入
- より複雑な場合はOpenRTMを用いてシステム構築

## ROS Plugin
- ROSノード・トピックを用いた通信に対応
- 現在開発中(2018年度早期にリリース予定)

## 補助シミュレータ
- 視覚センサシミュレータ

## Choreonoidの名前の由来
- ロボットの振り付け(Choregraphe)をしたい:
choregraphe + Humanoid = Choreonoid

## 情報交換用掲示板
オープンしました。
詳しくはChoreonoidのHPにて

## 擬似クローラ
擬似クローラのスプロケットの回転方向がjointAxis

## 産総研の流儀による変数の命名
q : 関節角度
u : 関節トルク

## ２つめのコントローラの場所
- １つめのコントローラと並列に配置

制御する関節が競合していなければ大丈夫
２つのコントローラは独立したものになる

- １つめのコントローラの小アイテムとして配置

２つのコントローラ間で通信が可能となる
こちらのほうが望ましい

## 摩擦係数
- materialという概念を導入
- 摩擦係数・反発係数のデータがマトリクス形式で格納されている
- .bodyファイルの中で記述
- サンプルshare/defalt/materials.yaml
- AGXPluginの項の物理マテリアルの追加パラメータに記載

## 描画の質の向上（検証が十分でないためにdefaultではOFFとなっている）
[manual]/simulation/tank-tutorial/step5.html
シーンレンダラの変更

## カメラの向きを設定
- defaltでは、レンズの向きは-z方向←業界の標準(横x軸,縦y軸、奥行き紙面手前がz軸方向)
- しかし、人間が見る方向は-z方向なので、-zがデフォルトになっている。
- レンズにも上と下がある→２段階の変換が必要
- rotation: [ [ 1, 0, 0, 90 ], [ 0, 1, 0, -90 ] ]

## RangeSensorなどのシミュレーション(サブシミュレータ)
[manual]/simulation/tank-tutorial/step6.html

## 外力
- SubmersibleSimulatorItem.cpp
- Vector3 b(0,0,submersible->mass()\*9.80665);
- root->f_ext() += b;

## 表示用と計算用のモデルを変更したい
- bin/chorenoid/tankjoystick
- PA10PA10Pickup
- cd share/model/PA10/
- Visual: { resource: { uri: "parts/J1.wrl" } }<-表示用
- Collision:←衝突判定用
- Show collision visualization button set
- V,F,Cで表示を切り替えることができる
  - V・・・表示用のモデルを表示
  - C・・・衝突判定用のモデルを表示
  - F・・・V,Cを同時に切り替え
  (表示用と衝突判定用のモデルを同時に切り替える)

## 衝突の計算
拘束条件法

## シーンビューにセンサの情報を取得
TankVisionSensorsを参考に
